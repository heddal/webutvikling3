(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(t,e,n){},125:function(t,e,n){},130:function(t,e,n){},159:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(7),o=n.n(i),c=(n(98),n(11)),l=n(9),s=n(12),u=n(13),h=n(14),m=n(23),p=n(200),d=(n(99),n(19)),f=(n(57),n(16)),v=function(t){return function(e,n){e({type:"SHOW_DESTINATION",destinationID:t})}},b=n(47),y=n.n(b),g=function(t){return function(e,n){e({type:"CHANGE_SEARCHWORD",word:t})}},E=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).getDataFromDb=function(){fetch("/api/threeMostPopular/").then((function(t){return t.json()})).then((function(t){return n.setState({data:t.data})}))},n.handleButtonClick=function(t,e){return function(a){n.props.showDestination(t),e++,n.updateDB(t,e),n.props.changeSearchword("")}},n.state={data:[],popularity:null,intervalIsSet:!1},n.updateDB=n.updateDB.bind(Object(d.a)(n)),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){if(this.getDataFromDb(),!this.state.intervalIsSet){var t=setInterval(this.getDataFromDb,1e3);this.setState({intervalIsSet:t})}}},{key:"componentWillUnmount",value:function(){this.state.intervalIsSet&&(clearInterval(this.state.intervalIsSet),this.setState({intervalIsSet:null}))}},{key:"updateDB",value:function(t,e){y.a.post("/api/updateData",{id:t,update:{popularity:e}})}},{key:"render",value:function(){var t=this,e=this.state.data;return r.a.createElement("div",{className:"trio"},e.map((function(e){return r.a.createElement("div",{className:"card-container",key:e.name},r.a.createElement("div",{className:"card-item"},r.a.createElement("img",{src:e.img,alt:"alt"})),r.a.createElement("div",{className:"card-item"}," ",r.a.createElement("p",{style:{textTransform:"capitalize"}},e.name)," "),r.a.createElement("div",{className:"card-item"},r.a.createElement(m.b,{to:"/Destination",className:"link"},r.a.createElement("button",{onClick:t.handleButtonClick(e._id,e.popularity)},"Show More"))))})))}}]),e}(a.Component),O=Object(f.b)(null,(function(t){return{showDestination:function(e){return t(v(e))},changeSearchword:function(e){return t(g(e))}}}))(E),j=n(24),w=n(85),D=n(3),k=n(196),S=n(80),I=n.n(S),C=n(204),N=n(203),T=n(35);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var x=Object(T.e)(Object(f.b)((function(t){return{word:t.filter.searchWord}}),(function(t){return{changeSearchword:function(e){return t(g(e))}}}))((function(t){var e,n=Object(k.a)((function(t){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"center"},margin:{margin:t.spacing(1)},textField:{flexBasis:500,backgroundColor:"white"}}}))(),a=r.a.useState({search:t.word}),i=Object(w.a)(a,2),o=i[0],c=i[1];return r.a.createElement("div",{className:n.root},r.a.createElement(N.a,{id:"search-box",className:Object(D.a)(n.margin,n.textField),variant:"outlined",label:"search location",value:o.search,onChange:(e="search",function(t){c(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(n,!0).forEach((function(e){Object(j.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},o,Object(j.a)({},e,t.target.value)))}),onKeyUp:(t.keyPressed,function(e){13===e.keyCode&&(""===o.search?t.changeSearchword("all"):t.changeSearchword(o.search),t.history.push("/search/"+o.search))}),InputProps:{endAdornment:r.a.createElement(C.a,{position:"end"},r.a.createElement(I.a,null))}}))}))),B=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"alt"},r.a.createElement(p.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:"main"},r.a.createElement(p.a,{container:!0,className:"text"},r.a.createElement("div",{className:"content"},r.a.createElement("h3",null,"Dream destination"),r.a.createElement("h4",null,"Where is your ultimate destination?"),r.a.createElement(x,null),r.a.createElement("p",null,"To se the most visited pages",r.a.createElement(m.b,{to:"/wordcloud",className:"link"},"click here")))),r.a.createElement(p.a,{container:!0,justify:"center",spacing:2},r.a.createElement(O,null))))}}]),e}(a.Component),W=(n(124),n(37)),F={sortType:""},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SORT_TYPE":return{sortType:e.sortType};default:return t}},P={destinationID:""},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_DESTINATION":return{destinationID:e.destinationID};default:return t}},H={length:0},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_LENGTH":return{length:e.length};default:return t}},L={searchWord:"",continent:""},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHANGE_SEARCHWORD":return{searchWord:e.word,continent:t.continent};case"CONTINENT_FILTER":return{searchWord:t.searchWord,continent:e.continent};default:return t}},U=Object(W.c)({filter:G,sort:M,destination:_,length:R}),z=n(81),K=(n(70),n(199)),J=(n(125),function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).former="",n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentWillMount",value:function(){var t=this.props.location.pathname;t.includes("/search")||"/wordcloud"===t||0===this.props.word.length?this.former="/":this.former="/search"}},{key:"render",value:function(){return r.a.createElement(m.b,{to:this.former},r.a.createElement("button",{className:"back-button"}," ",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"#999999",viewBox:"0 0 18 18"},r.a.createElement("path",{d:"M15 8.25H5.87l4.19-4.19L9 3 3 9l6 6 1.06-1.06-4.19-4.19H15v-1.5z"}))," ")," ")}}]),e}(a.Component)),Y=Object(T.e)(Object(f.b)((function(t){return{word:t.filter.searchWord}}))(J)),Z=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={data:[],id:0,name:null,country:null,continent:null,source:null,img:null},n.getDataFromDb=function(){fetch("/api/getDataFrom/"+n.props.destinationID).then((function(t){return t.json()})).then((function(t){return n.setState({data:t.data})}))},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){if(this.getDataFromDb(),!this.state.intervalIsSet){var t=setInterval(this.getDataFromDb,1e3);this.setState({intervalIsSet:t})}}},{key:"componentWillUnmount",value:function(){this.state.intervalIsSet&&(clearInterval(this.state.intervalIsSet),this.setState({intervalIsSet:null}))}},{key:"render",value:function(){var t=this.state.data;return r.a.createElement("div",{className:"container-destination"},r.a.createElement("div",{className:"back"},r.a.createElement(Y,null)),r.a.createElement(p.a,{container:!0,spacing:8,className:"papir"},r.a.createElement(K.a,{className:"paper"},r.a.createElement("div",null,r.a.createElement("h2",null," ",t.name," "),r.a.createElement("h4",null," ",t.country,", ",t.continent),r.a.createElement("div",{className:"bilde"},r.a.createElement("img",{src:t.img,alt:"alt"})),r.a.createElement("p",null," ",t.description),r.a.createElement("p",null,"This info is retrieved from: ",t.source)))))}}]),e}(a.Component),$=Object(f.b)((function(t){return{destinationID:t.destination.destinationID}}))(Z),q=n(82),Q=n.n(q),V=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).getDataFromDb=function(){"all"===n.props.word?"all"===n.props.continent?fetch("/api/getData").then((function(t){return t.json()})).then((function(t){return n.sortData(t.data)})):fetch("/api/search/"+n.props.continent).then((function(t){return t.json()})).then((function(t){return n.sortData(t.data)})):"all"===n.props.continent?fetch("/api/search/"+n.props.word).then((function(t){return t.json()})).then((function(t){return n.sortData(t.data)})):fetch("/api/search/"+n.props.continent+"/"+n.props.word).then((function(t){return t.json()})).then((function(t){return n.sortData(t.data)}))},n.updateDB=function(t,e){y.a.post("/api/updateData",{id:t,update:{popularity:e}})},n.handleButtonClick=function(t,e){return function(a){n.props.showDestination(t),e++,n.updateDB(t,e)}},n.state={data:[],intervalIsSet:!1,items:20,hasMoreItems:!0,maxItems:0},n.sortData=n.sortData.bind(Object(d.a)(n)),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){if(this.getDataFromDb(),!this.state.intervalIsSet){var t=setInterval(this.getDataFromDb,1e3);this.setState({intervalIsSet:t})}window.addEventListener("scroll",this.loadMore.bind(this),!1)}},{key:"componentWillUnmount",value:function(){this.state.intervalIsSet&&(clearInterval(this.state.intervalIsSet),this.setState({intervalIsSet:null}))}},{key:"sortData",value:function(t){if(this.props.sortType){if("A-Z"===this.props.sortType){var e=t.sort((function(t,e){return t.name>e.name?1:-1}));this.setState({data:e})}if("Popularity"===this.props.sortType){var n=t.sort((function(t,e){return t.popularity>e.popularity?-1:1}));this.setState({data:n})}}else this.setState({data:t});this.state.maxItems=this.props.setLength(t.length)}},{key:"loadMore",value:function(){var t=this;this.state.items>=this.state.maxItems?this.setState({hasMoreItems:!1}):setTimeout((function(){t.setState({items:t.state.items+20})}),1e3)}},{key:"render",value:function(){var t=this,e=this.state.data.map((function(e){return r.a.createElement("div",{className:"trio",key:e._id},r.a.createElement("div",{className:"card-container"},r.a.createElement("div",{className:"card-item"}," ",r.a.createElement("img",{src:e.img,alt:"alt"})," "),r.a.createElement("div",{className:"card-item"}," ",r.a.createElement("p",null," ",e.name," ")," "),r.a.createElement("div",{className:"card-item"}," ",r.a.createElement(m.b,{to:"/Destination",className:"link"},r.a.createElement("button",{onClick:t.handleButtonClick(e._id,e.popularity)}," Show More ")," ")," ")))}));return r.a.createElement("div",null,r.a.createElement(Q.a,{pageStart:0,loadMore:this.loadMore.bind(this),hasMore:this.state.hasMoreItems,useWindow:!1},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",height:"100%"}},e.slice(0,this.state.items))))}}]),e}(a.Component),X=Object(f.b)((function(t){var e=t.filter,n=t.sort;return{word:e.searchWord,continent:e.continent,sortType:n.sortType,length:t.length.length}}),(function(t){return{showDestination:function(e){return t(v(e))},setLength:function(e){return t(function(t){return function(e,n){e({type:"GET_LENGTH",length:t})}}(e))}}}))(V),tt=n(201),et=n(84),nt=n(205),at=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={anchorEl:null,sortType:"",type1:"A-Z",type2:"Popularity"},n.handleClick=function(t){n.setState({anchorEl:t.currentTarget})},n.handleClose=function(){n.setState({anchorEl:null})},n.handleSort=function(t){return function(e){n.props.sortBy(t)}},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(tt.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"primary",variant:"outlined",onClick:this.handleClick},"Sort by"),r.a.createElement(et.a,{id:"simple-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleClose},r.a.createElement(nt.a,{onClick:this.handleSort(this.state.type1)}," ",this.state.type1," "),r.a.createElement(nt.a,{onClick:this.handleSort(this.state.type2)}," ",this.state.type2," ")))}}]),e}(a.Component),rt=Object(f.b)(null,(function(t){return{sortBy:function(e){return t(function(t){return function(e,n){e({type:"SORT_TYPE",sortType:t})}}(e))}}}))(at),it=(n(130),function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).handleClick=function(t){return function(e){n.props.continentFilter(t)}},n.state={items:10,hasMoreItems:!0,activeButton:"all"},n.getContinent=n.getContinent.bind(Object(d.a)(n)),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){0===this.props.word.length&&this.props.changeSearchword("all"),this.props.continentFilter("all")}},{key:"getContinent",value:function(t,e){this.props.continentFilter(t);var n=this.state.activeButton;n!==e.target.id&&(document.getElementById(n).className="",document.getElementById(e.target.id).className="active",this.setState({activeButton:e.target.id}))}},{key:"render",value:function(){var t=this;return r.a.createElement(p.a,{container:!0,spacing:8,style:{padding:20,width:"100%",marginTop:36,marginBottom:36},direction:"column",justify:"center",alignItems:"center"},r.a.createElement("div",{style:{width:"100vw",textAlign:"center"}},r.a.createElement("div",{style:{justifyContent:"space-between",display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:"3%",paddingRight:"5%"}},r.a.createElement(Y,null),r.a.createElement("h2",{style:{padding:8}},' Results from "',this.props.word,'"'),r.a.createElement(rt,null)),r.a.createElement(x,null),r.a.createElement("div",{className:"button-group",style:{textAlign:"center",fontFamily:"Arial, Helvetica, sans-serif",borderRadius:"10px"}},r.a.createElement("button",{className:"active",id:"all",onClick:function(e){return t.getContinent("all",e)}}," All "),r.a.createElement("button",{id:"africa",onClick:function(e){return t.getContinent("Africa",e)}}," Africa "),r.a.createElement("button",{id:"america",onClick:function(e){return t.getContinent("America",e)}}," America "),r.a.createElement("button",{id:"asia",onClick:function(e){return t.getContinent("Asia",e)}}," Asia "),r.a.createElement("button",{id:"europe",onClick:function(e){return t.getContinent("Europe",e)}}," Europe "),r.a.createElement("button",{id:"oceania",onClick:function(e){return t.getContinent("Oceania",e)}}," Oceania "))),r.a.createElement(X,null))}}]),e}(a.Component)),ot=Object(f.b)((function(t){return{word:t.filter.searchWord}}),(function(t){return{continentFilter:function(e){return t(function(t){return function(e,n){e({type:"CONTINENT_FILTER",continent:t})}}(e))},changeSearchword:function(e){return t(g(e))}}}))(it),ct=n(83),lt=n.n(ct),st=function(t){return 360*Math.random()},ut=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={data:[]},n.getDataFromDb=function(){fetch("/api/wordcloudPopularity/").then((function(t){return t.json()})).then((function(t){return n.renameKeys(t.data)}))},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.getDataFromDb()}},{key:"capitalize",value:function(t){return"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)}},{key:"renameKeys",value:function(t){var e,n=[];for(e=0;e<t.length;e++){var a={text:this.capitalize(t[e].name),value:t[e].popularity};n.push(a)}this.setState({data:n})}},{key:"render",value:function(){return r.a.createElement("div",{style:{justifyContent:"center",display:"flex",height:"100vh",alignItems:"center"}},r.a.createElement(Y,null),r.a.createElement(lt.a,{data:this.state.data,font:"Impact",rotate:st}))}}]),e}(a.Component),ht=Object(W.d)(U,Object(W.a)(z.a)),mt=function(t){function e(){return Object(c.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement(f.a,{store:ht},r.a.createElement(m.a,null,r.a.createElement(T.a,{path:"/",exact:!0,component:B}),r.a.createElement(T.a,{path:"/wordcloud",component:ut}),r.a.createElement(T.a,{path:"/search",component:ot}),r.a.createElement(T.a,{path:"/destination",component:$})))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},57:function(t,e,n){},70:function(t,e,n){},93:function(t,e,n){t.exports=n(159)},98:function(t,e,n){},99:function(t,e,n){}},[[93,1,2]]]);
//# sourceMappingURL=main.b93a0816.chunk.js.map